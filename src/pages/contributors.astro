---
import BaseLayout from "../layouts/BaseLayout.astro";
import contributors from "../data/contributors.json";

type Contributor = {
  displayName: string;
  genres?: string[];
  links?: Record<string, string>;
};

const entries = Object.entries(contributors) as [string, Contributor][];

// ★リンク表示名の変換表
const LINK_LABELS: Record<string, string> = {
  instagram: "Instagram",
  youtube: "YouTube",
  note: "note",
  facebook:"Facebook",
};
---

<BaseLayout pageTitle="Contributors | KoLLOID" enableLinks={false}>
  <article style="max-width: 720px; margin: 0 auto; text-align: left;">
    <h2>Contributors</h2>

    {entries.map(([id, c]) => (
      <section
        style="
          margin-top: 2.5rem;
          padding-bottom: 2rem;
          border-bottom: 1px solid rgba(0,0,0,0.1);
        "
      >
        <h3 style="margin-bottom: 0.4rem;">
          {c.displayName}
        </h3>

        {/* ジャンル */}
        {c.genres && (
          <p style="font-size: 0.9rem; color: #555; margin: 0.3rem 0;">
            ジャンル：{c.genres.join("・")}
          </p>
        )}

        {/* リンク */}
        {c.links && (
          <ul style="margin-top: 0.6rem; padding-left: 1.2rem;">
            {Object.entries(c.links).map(([key, url]) => {
              const label = LINK_LABELS[key] ?? key;
              return (
                <li>
                  <a
                    href={url}
                    target="_blank"
                    rel="noopener noreferrer"
                    style="color:#444; text-decoration:underline;"
                  >
                    {key}（{label}）
                  </a>
                </li>
              );
            })}
          </ul>
        )}
      </section>
    ))}
  </article>
</BaseLayout>